<% content_for :title, "Make Forecasts" %>

<div class="container mx-auto px-4 py-8">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-800 mb-4">Make Your Forecasts</h1>

    <% if @current_gameweek %>
      <!-- Gameweek Info -->
      <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6">
        <h3 class="font-semibold text-blue-900 mb-2">Making forecasts for next gameweek:</h3>
        <p class="text-blue-800 text-lg"><strong><%= @current_gameweek.name %></strong></p>
        <p class="text-sm text-blue-600 mt-1">
          Starts: <%= @current_gameweek.start_time.strftime("%b %d, %Y at %l:%M %p") %>
        </p>
        <% if @current_gameweek.end_time %>
          <p class="text-sm text-blue-600">
            Ends: <%= @current_gameweek.end_time.strftime("%b %d, %Y at %l:%M %p") %>
          </p>
        <% end %>
      </div>

      <!-- Forecasts Table -->
      <%= turbo_frame_tag "forecasts_form" do %>
        <%= render "forecasts_form" %>
      <% end %>

      <!-- Hidden Submit Button for Accessibility -->
      <button type="submit" style="opacity: 0; position: absolute; left: -9999px;">Submit Forecasts</button>

    <% else %>
      <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
        <h3 class="font-medium text-yellow-900 mb-2">No Upcoming Gameweek</h3>
        <p class="text-yellow-800">
          No upcoming gameweek is available for forecasts. Please contact an administrator to sync gameweeks from the FPL API.
        </p>
      </div>
    <% end %>

    <div class="mt-6">
      <%= link_to "Back to forecasts", forecasts_path, class: "rounded-md px-3.5 py-2.5 bg-gray-600 hover:bg-gray-500 text-white font-medium" %>
    </div>
  </div>
</div>
